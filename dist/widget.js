(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatValue=formatValue;exports.formatQuantity=formatQuantity;function formatValue(value,precision){precision=precision||1;if(typeof value==="number"&&!isNaN(value)){return value.toFixed(precision).replace(/\B(?=(\d{3})+(?!\d))/g,",")}else{return"-"}}function formatQuantity(quantity){var tmp=formatValue(quantity,0);if(tmp==="-"){return tmp}else{var len=tmp.length;return tmp.substring(0,len-3)}}},{}],2:[function(require,module,exports){"use strict";require("../style.css");var _require=require("./format");var formatValue=_require.formatValue;var formatQuantity=_require.formatQuantity;var PRICE_SERVICE="https://priceservice.vndirect.com.vn";var FloorCodes={HNX:"02",HOSE:"10",UPCOME:"03",VN30:"11",HNX30:"12"};function getValueColor(value,base,ceiling,bottom){var direction;if(value===base){direction="equal"}else if(value===ceiling){direction="ceiling"}else if(value===bottom){direction="bottom"}else if(value>base){direction="inc"}else{direction="down"}return"vsw-"+direction}function getStockPriceColor(price,stockInfo){var basicPrice=stockInfo.basicPrice;var ceilingPrice=stockInfo.ceilingPrice;var floorPrice=stockInfo.floorPrice;return getValueColor(price,basicPrice,ceilingPrice,floorPrice)}function getStatusKey(marketInfo){var status=marketInfo.status;var floorCode=marketInfo.floorCode;var vStatus;switch(status){case"O":case"5":vStatus="continuous";break;case"P":case"2":if(floorCode==FloorCodes.HOSE||floorCode==FloorCodes.VN30){vStatus="ato"}else{vStatus="closed"}break;case"A":case"9":case"30":vStatus="atc";break;case"C":case"0":case"35":vStatus="putThrough";break;case"I":case"BSU":case"3":case"10":vStatus="intermission";break;default:vStatus="closed"}return vStatus}function formatMarketStatusText(marketInfo){var mapping={ato:"ATO",continuous:"Liên tục",intermission:"Nghỉ trưa",atc:"ATC",putThrough:"GDTT",closed:"Đóng cửa"};return mapping[getStatusKey(marketInfo)]}function ajax(url,method,callback){var request=new XMLHttpRequest;request.open(method,url);request.onload=function(){if(request.status>=200&&request.status<400){callback(null,JSON.parse(request.responseText))}else{callback(request)}};request.onerror=function(error){callback(error)};request.send()}function getMarketInfo(floorCode,callback){ajax(PRICE_SERVICE+"/priceservice/market/snapshot/q=codes:"+floorCode,"GET",function(error,data){if(!error){callback(null,data[floorCode].data)}else{console.log(error)}})}function getStockInfo(stockCode,callback){ajax(PRICE_SERVICE+"/priceservice/secinfo/snapshot/q=codes:"+stockCode,"GET",function(error,data){if(error){callback(error)}else{var arr=data[0].split("|");callback(null,{floorCode:arr[0],tradingDate:arr[1],time:arr[2],code:arr[3],companyName:arr[4],stockType:arr[5],totalRoom:parseInt(arr[6]),currentRoom:parseInt(arr[7]),basicPrice:parseFloat(arr[8]),openPrice:parseFloat(arr[9]),closePrice:parseFloat(arr[10]),currentPrice:parseFloat(arr[11]),currentQtty:parseInt(arr[12]),highestPrice:parseFloat(arr[13]),lowestPrice:parseFloat(arr[14]),ceilingPrice:parseFloat(arr[15]),floorPrice:parseFloat(arr[16]),totalOfferQtty:parseInt(arr[17]),totalBidQtty:parseInt(arr[18]),matchPrice:parseFloat(arr[19]),matchQtty:parseInt(arr[20]),matchValue:parseInt(arr[21]),averagePrice:parseFloat(arr[22]),bidPrice01:parseFloat(arr[23]),bidQtty01:parseInt(arr[24]),bidPrice02:parseFloat(arr[25]),bidQtty02:parseInt(arr[26]),bidPrice03:parseFloat(arr[27]),bidQtty03:parseInt(arr[28]),offerPrice01:parseFloat(arr[29]),offerQtty01:parseInt(arr[30]),offerPrice02:parseFloat(arr[31]),offerQtty02:parseInt(arr[32]),offerPrice03:parseFloat(arr[33]),offerQtty03:parseInt(arr[34]),accumulatedVal:parseFloat(arr[35]),accumulatedVol:parseFloat(arr[36]),buyForeignQtty:parseInt(arr[37]),sellForeignQtty:parseInt(arr[38]),projectOpen:parseFloat(arr[39]),sequence:arr[40]})}})}function render(stockInfo,marketInfo){var basicPrice=stockInfo.basicPrice;var matchPrice=stockInfo.matchPrice;var highestPrice=stockInfo.highestPrice;var lowestPrice=stockInfo.lowestPrice;var floorPrice=stockInfo.floorPrice;var accumulatedVol=stockInfo.accumulatedVol;var code=stockInfo.code;var marketStatus=formatMarketStatusText(marketInfo);var averagePrice=parseFloat(((highestPrice+lowestPrice)/2).toFixed(1));var priceDelta=matchPrice-basicPrice;var priceDeltaPercent=priceDelta/basicPrice*100;var now=new Date;var date=now.getDate(),month=now.getMonth(),year=now.getFullYear(),hour=now.getHours(),min=now.getMinutes();var renderTime=date+"/"+month+"/"+year+" "+hour+":"+min;var duMua=NaN,duBan=NaN;if(stockInfo.floorCode===FloorCodes.HNX){var duMua=stockInfo.totalBidQtty-stockInfo.accumulatedVol;var duBan=stockInfo.totalOfferQtty-stockInfo.accumulatedVol}var template='\n    <div class="vsw-widget">\n        <div>\n            <div class="vsw-current-price '+getStockPriceColor(matchPrice,stockInfo)+'">\n                '+formatValue(matchPrice)+'\n            </div>\n\n            <div class="vsw-symbol '+getStockPriceColor(matchPrice,stockInfo)+'">\n                <div>'+code+'</div>\n                <div class="'+getStockPriceColor(matchPrice,stockInfo)+'-icon"></div>\n            </div>\n\n            <div class="vsw-volume">\n                <div class="vsw-percentage '+getStockPriceColor(matchPrice,stockInfo)+'">\n                    '+formatValue(priceDelta)+" ("+(priceDeltaPercent>=0?"+":"-")+formatValue(priceDeltaPercent,2)+'%)\n                </div>\n\n                <div>\n                    <span>Tổng KLGD:</span>\n                    <span class="vsw-acc-volume">\n                        '+formatQuantity(accumulatedVol*10)+'\n                    </span>\n                </div>\n            </div>\n        </div>\n\n        <div>\n            <div class="vsw-highest-price">\n                <span class="vsw-label">Cao nhất</span>\n                <span class="vsw-value '+getStockPriceColor(highestPrice,stockInfo)+'">\n                    '+formatValue(highestPrice)+'\n                </span>\n            </div>\n            <div class="vsw-average-price">\n                <span class="vsw-label">Trung bình</span>\n                <span class="vsw-value '+getStockPriceColor(averagePrice,stockInfo)+'">\n                    '+formatValue(averagePrice)+'\n                </span>\n            </div>\n            <div class="vsw-lowest-price">\n                <span class="vsw-label">Thấp nhất</span>\n                <span class="vsw-value '+getStockPriceColor(lowestPrice,stockInfo)+'">\n                    '+formatValue(lowestPrice)+'\n                </span>\n            </div>\n        </div>\n\n        <div class="vsw-du-mua-du-ban">\n            <div class="vsw-du-mua">\n                <span>Dư mua:</span>\n                <span class="vsw-inc">'+formatQuantity(duMua*10)+'</span>\n            </div>\n            <div class="vsw-du-ban">\n                <span>Dư bán:</span>\n                <span class="vsw-down">'+formatQuantity(duBan*10)+'</span>\n            </div>\n        </div>\n\n        <div class="vsw-meta-info">\n            <div class="vsw-market-status">\n                <span>Phiên giao dịch:</span> <span class="vsw-value">'+marketStatus+'</span>\n            </div>\n            <div class="vsw-update-time">\n                <span>Thời điểm cập nhật:</span>\n                <span class="vsw-value">'+renderTime+'</span>\n            </div>\n        </div>\n\n        <div>\n            <a class="vsw-copyright" href="https://www.vndirect.com.vn/" target="_blank">\n                Bản quyền © <img src="logo.png" alt="VNDIRECT" />\n            </a>\n        </div>\n    </div>\n    ';return template}function setup(element){var stockSymbol=element.getAttribute("data-symbol").toUpperCase();var rerender=function rerender(){getStockInfo(stockSymbol,function(error,stockInfo){getMarketInfo(stockInfo.floorCode,function(error,marketInfo){element.innerHTML=render(stockInfo,marketInfo)})})};rerender();setInterval(rerender,30*1e3)}var elements=document.querySelectorAll("[data-stock-widget]");for(var i=0;i<elements.length;i++){setup(elements[i])}},{"../style.css":3,"./format":1}],3:[function(require,module,exports){var css='.vsw-equal{color:#ffae01}.vsw-down{color:#d21801}.vsw-inc{color:green}.vsw-ceiling{color:#af169f}.vsw-bottom{color:#6CF}.vsw-equal-icon{color:#ffae01;content:"=";height:1em}.vsw-down-icon{color:#d21801;content:"▼";height:1em}.vsw-inc-icon{color:green;content:"▲";height:1em}.vsw-ceiling-icon{color:#af169f;content:"▲";height:1em}.vsw-bottom-icon{color:#6CF;content:"▼";height:1em}.vsw-widget{border:1px solid #DCDCDC;border-radius:5px;padding:15px;color:gray;font-family:Arial,sans-serif;font-size:13px;background-color:#fff}.vsw-widget>div:after{content:"";display:table;clear:both}.vsw-widget>div{padding-bottom:1em}.vsw-widget>div:last-child{padding-bottom:0}.vsw-volume{float:right}.vsw-percentage{text-align:right}.vsw-current-price,.vsw-symbol{margin-right:5px}.vsw-current-price{font-weight:700;font-size:2.5em;float:left}.vsw-symbol{float:left}.vsw-average-price,.vsw-highest-price,.vsw-lowest-price{float:left;width:33.3%}.vsw-average-price>.vsw-value,.vsw-highest-price>.vsw-value,.vsw-lowest-price>.vsw-value{font-size:1.5em;font-weight:700}.vsw-average-price>.vsw-label,.vsw-highest-price>.vsw-label,.vsw-lowest-price>.vsw-label{display:block}.vsw-du-mua-du-ban{border-bottom:1px dotted #DCDCDC;margin-bottom:1em}.vsw-du-ban,.vsw-du-mua{float:left;width:50%}.vsw-market-status .vsw-value{color:#f39200;font-weight:700}.vsw-update-time .vsw-value{color:#333}.vsw-acc-volume{color:#333;font-weight:700}.vsw-meta-info .vsw-value{float:right}.vsw-meta-info>div:not(:last-child){margin-bottom:.5em}a.vsw-copyright{float:right;text-decoration:none;font-size:.8em;color:inherit;margin-bottom:-.5em}.vsw-copyright img{height:1em;vertical-align:middle}';require("browserify-css").createStyle(css,{href:".tmp/style.css"});module.exports=css},{"browserify-css":4}],4:[function(require,module,exports){"use strict";module.exports={createLink:function(href,attributes){var head=document.head||document.getElementsByTagName("head")[0];var link=document.createElement("link");link.href=href;link.rel="stylesheet";for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue}var value=attributes[key];link.setAttribute("data-"+key,value)}head.appendChild(link)},createStyle:function(cssText,attributes){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue}var value=attributes[key];style.setAttribute("data-"+key,value)}if(style.sheet){style.innerHTML=cssText;style.sheet.cssText=cssText;head.appendChild(style)}else if(style.styleSheet){head.appendChild(style);style.styleSheet.cssText=cssText}else{style.appendChild(document.createTextNode(cssText));head.appendChild(style)}}}},{}]},{},[2]);